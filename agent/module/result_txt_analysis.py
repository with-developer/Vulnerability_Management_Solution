import re

# Read the content of the txt file
with open("Results_2023-08-15_07.56.36.txt", "r", encoding="utf-8") as file:
    content = file.readlines()

# Regular expression patterns
item_pattern = re.compile(r'(\d+\.\d+)')
result_pattern = re.compile(r'(취약|양호|N/A)')

# Initialize an empty list to store the dictionaries
results = []

# Iterate over the content lines
i = 0
while i < len(content):
    line = content[i].strip()
    
    # Check for the pattern ▶ ... ◀ to identify the item
    if line.startswith('▶') and line.endswith('◀'):
        item_dict = {}
        
        # Extract the item information
        item_match = item_pattern.search(line)
        if item_match:
            item_dict['category'] = item_match.group(1)
        
        # Skip the lines of "양호 판단 기준" until we reach the result line
        while not content[i].strip().startswith('※'):
            i += 1

        # Extract the result (e.g. 양호, 취약, N/A)
        result_match = result_pattern.search(content[i])
        if result_match:
            item_dict['diagnostic_results'] = result_match.group(1)
        
        # Extract additional comments
        i += 1
        if i < len(content):
            comment = content[i].strip()
            if comment and not comment.startswith('※'):
                item_dict['comment'] = comment
            else:
                item_dict['comment'] = None
        
        results.append(item_dict)
    
    i += 1

# Sort the results based on the '항목' field
sorted_results = sorted(results, key=lambda x: [int(num) for num in x['category'].split('.')])

print(sorted_results)